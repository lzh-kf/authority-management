import{a as q,o as re}from"./evtd-CI_DDEu_.js";import{i as Me,d as ce,p as G,e as Le,a as We}from"./seemly-CiJeXoFo.js";import{c as He,F as Se,C as Ve,d as X,p as Xe,g as ze,i as ae,r as I,o as R,u as Te,t as Z,j as _,l as F,B as Ye,b as K,w as U,q as Ee,Q as Ae,f as De,h as Ne,n as _e}from"./@vue-B5e1V-Bk.js";import{u as de}from"./@css-render-CCNRfX8h.js";import{g as Pe,u as le,o as je,i as Ue}from"./vooks-D63o6gaZ.js";import{z as qe}from"./vdirs-Bxp-63WN.js";import{R as Ke}from"./@juggle-C8OzoCMD.js";import{C as Ge}from"./css-render-BDrvWz3H.js";function se(n,e,t="default"){const o=e[t];if(o===void 0)throw new Error(`[vueuc/${n}]: slot[${t}] is empty.`);return o()}function ue(n,e=!0,t=[]){return n.forEach(o=>{if(o!==null){if(typeof o!="object"){(typeof o=="string"||typeof o=="number")&&t.push(He(String(o)));return}if(Array.isArray(o)){ue(o,e,t);return}if(o.type===Se){if(o.children===null)return;Array.isArray(o.children)&&ue(o.children,e,t)}else o.type!==Ve&&t.push(o)}}),t}function he(n,e,t="default"){const o=e[t];if(o===void 0)throw new Error(`[vueuc/${n}]: slot[${t}] is empty.`);const r=ue(o());if(r.length===1)return r[0];throw new Error(`[vueuc/${n}]: slot[${t}] should have exactly one child.`)}let H=null;function Fe(){if(H===null&&(H=document.getElementById("v-binder-view-measurer"),H===null)){H=document.createElement("div"),H.id="v-binder-view-measurer";const{style:n}=H;n.position="fixed",n.left="0",n.right="0",n.top="0",n.bottom="0",n.pointerEvents="none",n.visibility="hidden",document.body.appendChild(H)}return H.getBoundingClientRect()}function Qe(n,e){const t=Fe();return{top:e,left:n,height:0,width:0,right:t.width-n,bottom:t.height-e}}function ne(n){const e=n.getBoundingClientRect(),t=Fe();return{left:e.left-t.left,top:e.top-t.top,bottom:t.height+t.top-e.bottom,right:t.width+t.left-e.right,width:e.width,height:e.height}}function Je(n){return n.nodeType===9?null:n.parentNode}function Be(n){if(n===null)return null;const e=Je(n);if(e===null)return null;if(e.nodeType===9)return document;if(e.nodeType===1){const{overflow:t,overflowX:o,overflowY:r}=getComputedStyle(e);if(/(auto|scroll|overlay)/.test(t+r+o))return e}return Be(e)}const yt=X({name:"Binder",props:{syncTargetWithParent:Boolean,syncTarget:{type:Boolean,default:!0}},setup(n){var e;Xe("VBinder",(e=ze())===null||e===void 0?void 0:e.proxy);const t=ae("VBinder",null),o=I(null),r=i=>{o.value=i,t&&n.syncTargetWithParent&&t.setTargetRef(i)};let u=[];const v=()=>{let i=o.value;for(;i=Be(i),i!==null;)u.push(i);for(const y of u)re("scroll",y,M,!0)},m=()=>{for(const i of u)q("scroll",i,M,!0);u=[]},d=new Set,w=i=>{d.size===0&&v(),d.has(i)||d.add(i)},g=i=>{d.has(i)&&d.delete(i),d.size===0&&m()},M=()=>{Me(a)},a=()=>{d.forEach(i=>i())},c=new Set,p=i=>{c.size===0&&re("resize",window,l),c.has(i)||c.add(i)},h=i=>{c.has(i)&&c.delete(i),c.size===0&&q("resize",window,l)},l=()=>{c.forEach(i=>i())};return R(()=>{q("resize",window,l),m()}),{targetRef:o,setTargetRef:r,addScrollListener:w,removeScrollListener:g,addResizeListener:p,removeResizeListener:h}},render(){return se("binder",this.$slots)}}),xt=X({name:"Target",setup(){const{setTargetRef:n,syncTarget:e}=ae("VBinder");return{syncTarget:e,setTargetDirective:{mounted:n,updated:n}}},render(){const{syncTarget:n,setTargetDirective:e}=this;return n?Te(he("follower",this.$slots),[[e]]):he("follower",this.$slots)}});function pe(n,e){console.error(`[vueuc/${n}]: ${e}`)}const{c:V}=Ge(),fe="vueuc-style";function me(n){return n&-n}class Ze{constructor(e,t){this.l=e,this.min=t;const o=new Array(e+1);for(let r=0;r<e+1;++r)o[r]=0;this.ft=o}add(e,t){if(t===0)return;const{l:o,ft:r}=this;for(e+=1;e<=o;)r[e]+=t,e+=me(e)}get(e){return this.sum(e+1)-this.sum(e)}sum(e){if(e===void 0&&(e=this.l),e<=0)return 0;const{ft:t,min:o,l:r}=this;if(e>r)throw new Error("[FinweckTree.sum]: `i` is larger than length.");let u=e*o;for(;e>0;)u+=t[e],e-=me(e);return u}getBound(e){let t=0,o=this.l;for(;o>t;){const r=Math.floor((t+o)/2),u=this.sum(r);if(u>e){o=r;continue}else if(u<e){if(t===r)return this.sum(t+1)<=e?t+1:r;t=r}else return r}return t}}function ve(n){return typeof n=="string"?document.querySelector(n):n()}const Re=X({name:"LazyTeleport",props:{to:{type:[String,Object],default:void 0},disabled:Boolean,show:{type:Boolean,required:!0}},setup(n){return{showTeleport:Pe(Z(n,"show")),mergedTo:_(()=>{const{to:e}=n;return e??"body"})}},render(){return this.showTeleport?this.disabled?se("lazy-teleport",this.$slots):F(Ye,{disabled:this.disabled,to:this.mergedTo},se("lazy-teleport",this.$slots)):null}}),Q={top:"bottom",bottom:"top",left:"right",right:"left"},be={start:"end",center:"center",end:"start"},oe={top:"height",bottom:"height",left:"width",right:"width"},et={"bottom-start":"top left",bottom:"top center","bottom-end":"top right","top-start":"bottom left",top:"bottom center","top-end":"bottom right","right-start":"top left",right:"center left","right-end":"bottom left","left-start":"top right",left:"center right","left-end":"bottom right"},tt={"bottom-start":"bottom left",bottom:"bottom center","bottom-end":"bottom right","top-start":"top left",top:"top center","top-end":"top right","right-start":"top right",right:"center right","right-end":"bottom right","left-start":"top left",left:"center left","left-end":"bottom left"},nt={"bottom-start":"right","bottom-end":"left","top-start":"right","top-end":"left","right-start":"bottom","right-end":"top","left-start":"bottom","left-end":"top"},we={top:!0,bottom:!1,left:!0,right:!1},ge={top:"end",bottom:"start",left:"end",right:"start"};function ot(n,e,t,o,r,u){if(!r||u)return{placement:n,top:0,left:0};const[v,m]=n.split("-");let d=m??"center",w={top:0,left:0};const g=(c,p,h)=>{let l=0,i=0;const y=t[c]-e[p]-e[c];return y>0&&o&&(h?i=we[p]?y:-y:l=we[p]?y:-y),{left:l,top:i}},M=v==="left"||v==="right";if(d!=="center"){const c=nt[n],p=Q[c],h=oe[c];if(t[h]>e[h]){if(e[c]+e[h]<t[h]){const l=(t[h]-e[h])/2;e[c]<l||e[p]<l?e[c]<e[p]?(d=be[m],w=g(h,p,M)):w=g(h,c,M):d="center"}}else t[h]<e[h]&&e[p]<0&&e[c]>e[p]&&(d=be[m])}else{const c=v==="bottom"||v==="top"?"left":"top",p=Q[c],h=oe[c],l=(t[h]-e[h])/2;(e[c]<l||e[p]<l)&&(e[c]>e[p]?(d=ge[c],w=g(h,c,M)):(d=ge[p],w=g(h,p,M)))}let a=v;return e[v]<t[oe[v]]&&e[v]<e[Q[v]]&&(a=Q[v]),{placement:d!=="center"?`${a}-${d}`:a,left:w.left,top:w.top}}function it(n,e){return e?tt[n]:et[n]}function rt(n,e,t,o,r,u){if(u)switch(n){case"bottom-start":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-100%)"};case"bottom-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left)}px`,transform:""};case"top-end":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%)"};case"right-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%)"};case"right-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"left-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left)}px`,transform:""};case"left-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-100%)"};case"top":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width/2)}px`,transform:"translateX(-50%)"};case"right":return{top:`${Math.round(t.top-e.top+t.height/2)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-50%)"};case"left":return{top:`${Math.round(t.top-e.top+t.height/2)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-50%)"};case"bottom":default:return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width/2)}px`,transform:"translateX(-50%) translateY(-100%)"}}switch(n){case"bottom-start":return{top:`${Math.round(t.top-e.top+t.height+o)}px`,left:`${Math.round(t.left-e.left+r)}px`,transform:""};case"bottom-end":return{top:`${Math.round(t.top-e.top+t.height+o)}px`,left:`${Math.round(t.left-e.left+t.width+r)}px`,transform:"translateX(-100%)"};case"top-start":return{top:`${Math.round(t.top-e.top+o)}px`,left:`${Math.round(t.left-e.left+r)}px`,transform:"translateY(-100%)"};case"top-end":return{top:`${Math.round(t.top-e.top+o)}px`,left:`${Math.round(t.left-e.left+t.width+r)}px`,transform:"translateX(-100%) translateY(-100%)"};case"right-start":return{top:`${Math.round(t.top-e.top+o)}px`,left:`${Math.round(t.left-e.left+t.width+r)}px`,transform:""};case"right-end":return{top:`${Math.round(t.top-e.top+t.height+o)}px`,left:`${Math.round(t.left-e.left+t.width+r)}px`,transform:"translateY(-100%)"};case"left-start":return{top:`${Math.round(t.top-e.top+o)}px`,left:`${Math.round(t.left-e.left+r)}px`,transform:"translateX(-100%)"};case"left-end":return{top:`${Math.round(t.top-e.top+t.height+o)}px`,left:`${Math.round(t.left-e.left+r)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top":return{top:`${Math.round(t.top-e.top+o)}px`,left:`${Math.round(t.left-e.left+t.width/2+r)}px`,transform:"translateY(-100%) translateX(-50%)"};case"right":return{top:`${Math.round(t.top-e.top+t.height/2+o)}px`,left:`${Math.round(t.left-e.left+t.width+r)}px`,transform:"translateY(-50%)"};case"left":return{top:`${Math.round(t.top-e.top+t.height/2+o)}px`,left:`${Math.round(t.left-e.left+r)}px`,transform:"translateY(-50%) translateX(-100%)"};case"bottom":default:return{top:`${Math.round(t.top-e.top+t.height+o)}px`,left:`${Math.round(t.left-e.left+t.width/2+r)}px`,transform:"translateX(-50%)"}}}const lt=V([V(".v-binder-follower-container",{position:"absolute",left:"0",right:"0",top:"0",height:"0",pointerEvents:"none",zIndex:"auto"}),V(".v-binder-follower-content",{position:"absolute",zIndex:"auto"},[V("> *",{pointerEvents:"all"})])]),$t=X({name:"Follower",inheritAttrs:!1,props:{show:Boolean,enabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom"},syncTrigger:{type:Array,default:["resize","scroll"]},to:[String,Object],flip:{type:Boolean,default:!0},internalShift:Boolean,x:Number,y:Number,width:String,minWidth:String,containerClass:String,teleportDisabled:Boolean,zindexable:{type:Boolean,default:!0},zIndex:Number,overlap:Boolean},setup(n){const e=ae("VBinder"),t=le(()=>n.enabled!==void 0?n.enabled:n.show),o=I(null),r=I(null),u=()=>{const{syncTrigger:a}=n;a.includes("scroll")&&e.addScrollListener(d),a.includes("resize")&&e.addResizeListener(d)},v=()=>{e.removeScrollListener(d),e.removeResizeListener(d)};K(()=>{t.value&&(d(),u())});const m=de();lt.mount({id:"vueuc/binder",head:!0,anchorMetaName:fe,ssr:m}),R(()=>{v()}),je(()=>{t.value&&d()});const d=()=>{if(!t.value)return;const a=o.value;if(a===null)return;const c=e.targetRef,{x:p,y:h,overlap:l}=n,i=p!==void 0&&h!==void 0?Qe(p,h):ne(c);a.style.setProperty("--v-target-width",`${Math.round(i.width)}px`),a.style.setProperty("--v-target-height",`${Math.round(i.height)}px`);const{width:y,minWidth:x,placement:B,internalShift:C,flip:N}=n;a.setAttribute("v-placement",B),l?a.setAttribute("v-overlap",""):a.removeAttribute("v-overlap");const{style:E}=a;y==="target"?E.width=`${i.width}px`:y!==void 0?E.width=y:E.width="",x==="target"?E.minWidth=`${i.width}px`:x!==void 0?E.minWidth=x:E.minWidth="";const Y=ne(a),k=ne(r.value),{left:L,top:s,placement:f}=ot(B,i,Y,C,N,l),b=it(f,l),{left:$,top:S,transform:T}=rt(f,k,i,s,L,l);a.setAttribute("v-placement",f),a.style.setProperty("--v-offset-left",`${Math.round(L)}px`),a.style.setProperty("--v-offset-top",`${Math.round(s)}px`),a.style.transform=`translateX(${$}) translateY(${S}) ${T}`,a.style.setProperty("--v-transform-origin",b),a.style.transformOrigin=b};U(t,a=>{a?(u(),w()):v()});const w=()=>{Ee().then(d).catch(a=>console.error(a))};["placement","x","y","internalShift","flip","width","overlap","minWidth"].forEach(a=>{U(Z(n,a),d)}),["teleportDisabled"].forEach(a=>{U(Z(n,a),w)}),U(Z(n,"syncTrigger"),a=>{a.includes("resize")?e.addResizeListener(d):e.removeResizeListener(d),a.includes("scroll")?e.addScrollListener(d):e.removeScrollListener(d)});const g=Ue(),M=le(()=>{const{to:a}=n;if(a!==void 0)return a;g.value});return{VBinder:e,mergedEnabled:t,offsetContainerRef:r,followerRef:o,mergedTo:M,syncPosition:d}},render(){return F(Re,{show:this.show,to:this.mergedTo,disabled:this.teleportDisabled},{default:()=>{var n,e;const t=F("div",{class:["v-binder-follower-container",this.containerClass],ref:"offsetContainerRef"},[F("div",{class:"v-binder-follower-content",ref:"followerRef"},(e=(n=this.$slots).default)===null||e===void 0?void 0:e.call(n))]);return this.zindexable?Te(t,[[qe,{enabled:this.mergedEnabled,zIndex:this.zIndex}]]):t}})}});class st{constructor(){this.handleResize=this.handleResize.bind(this),this.observer=new(typeof window<"u"&&window.ResizeObserver||Ke)(this.handleResize),this.elHandlersMap=new Map}handleResize(e){for(const t of e){const o=this.elHandlersMap.get(t.target);o!==void 0&&o(t)}}registerHandler(e,t){this.elHandlersMap.set(e,t),this.observer.observe(e)}unregisterHandler(e){this.elHandlersMap.has(e)&&(this.elHandlersMap.delete(e),this.observer.unobserve(e))}}const ye=new st,xe=X({name:"ResizeObserver",props:{onResize:Function},setup(n){let e=!1;const t=ze().proxy;function o(r){const{onResize:u}=n;u!==void 0&&u(r)}K(()=>{const r=t.$el;if(r===void 0){pe("resize-observer","$el does not exist.");return}if(r.nextElementSibling!==r.nextSibling&&r.nodeType===3&&r.nodeValue!==""){pe("resize-observer","$el can not be observed (it may be a text node).");return}r.nextElementSibling!==null&&(ye.registerHandler(r.nextElementSibling,o),e=!0)}),R(()=>{e&&ye.unregisterHandler(t.$el.nextElementSibling)})},render(){return Ae(this.$slots,"default")}});let J;function ut(){return typeof document>"u"?!1:(J===void 0&&("matchMedia"in window?J=window.matchMedia("(pointer:coarse)").matches:J=!1),J)}let ie;function $e(){return typeof document>"u"?1:(ie===void 0&&(ie="chrome"in window?window.devicePixelRatio:1),ie)}const at=V(".v-vl",{maxHeight:"inherit",height:"100%",overflow:"auto",minWidth:"1px"},[V("&:not(.v-vl--show-scrollbar)",{scrollbarWidth:"none"},[V("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",{width:0,height:0,display:"none"})])]),Mt=X({name:"VirtualList",inheritAttrs:!1,props:{showScrollbar:{type:Boolean,default:!0},items:{type:Array,default:()=>[]},itemSize:{type:Number,required:!0},itemResizable:Boolean,itemsStyle:[String,Object],visibleItemsTag:{type:[String,Object],default:"div"},visibleItemsProps:Object,ignoreItemResize:Boolean,onScroll:Function,onWheel:Function,onResize:Function,defaultScrollKey:[Number,String],defaultScrollIndex:Number,keyField:{type:String,default:"key"},paddingTop:{type:[Number,String],default:0},paddingBottom:{type:[Number,String],default:0}},setup(n){const e=de();at.mount({id:"vueuc/virtual-list",head:!0,anchorMetaName:fe,ssr:e}),K(()=>{const{defaultScrollIndex:s,defaultScrollKey:f}=n;s!=null?p({index:s}):f!=null&&p({key:f})});let t=!1,o=!1;De(()=>{if(t=!1,!o){o=!0;return}p({top:M.value,left:g})}),Ne(()=>{t=!0,o||(o=!0)});const r=_(()=>{const s=new Map,{keyField:f}=n;return n.items.forEach((b,$)=>{s.set(b[f],$)}),s}),u=I(null),v=I(void 0),m=new Map,d=_(()=>{const{items:s,itemSize:f,keyField:b}=n,$=new Ze(s.length,f);return s.forEach((S,T)=>{const z=S[b],A=m.get(z);A!==void 0&&$.add(T,A)}),$}),w=I(0);let g=0;const M=I(0),a=le(()=>Math.max(d.value.getBound(M.value-ce(n.paddingTop))-1,0)),c=_(()=>{const{value:s}=v;if(s===void 0)return[];const{items:f,itemSize:b}=n,$=a.value,S=Math.min($+Math.ceil(s/b+1),f.length-1),T=[];for(let z=$;z<=S;++z)T.push(f[z]);return T}),p=(s,f)=>{if(typeof s=="number"){y(s,f,"auto");return}const{left:b,top:$,index:S,key:T,position:z,behavior:A,debounce:W=!0}=s;if(b!==void 0||$!==void 0)y(b,$,A);else if(S!==void 0)i(S,A,W);else if(T!==void 0){const ee=r.value.get(T);ee!==void 0&&i(ee,A,W)}else z==="bottom"?y(0,Number.MAX_SAFE_INTEGER,A):z==="top"&&y(0,0,A)};let h,l=null;function i(s,f,b){const{value:$}=d,S=$.sum(s)+ce(n.paddingTop);if(!b)u.value.scrollTo({left:0,top:S,behavior:f});else{h=s,l!==null&&window.clearTimeout(l),l=window.setTimeout(()=>{h=void 0,l=null},16);const{scrollTop:T,offsetHeight:z}=u.value;if(S>T){const A=$.get(s);S+A<=T+z||u.value.scrollTo({left:0,top:S+A-z,behavior:f})}else u.value.scrollTo({left:0,top:S,behavior:f})}}function y(s,f,b){u.value.scrollTo({left:s,top:f,behavior:b})}function x(s,f){var b,$,S;if(t||n.ignoreItemResize||L(f.target))return;const{value:T}=d,z=r.value.get(s),A=T.get(z),W=(S=($=(b=f.borderBoxSize)===null||b===void 0?void 0:b[0])===null||$===void 0?void 0:$.blockSize)!==null&&S!==void 0?S:f.contentRect.height;if(W===A)return;W-n.itemSize===0?m.delete(s):m.set(s,W-n.itemSize);const P=W-A;if(P===0)return;T.add(z,P);const D=u.value;if(D!=null){if(h===void 0){const te=T.sum(z);D.scrollTop>te&&D.scrollBy(0,P)}else if(z<h)D.scrollBy(0,P);else if(z===h){const te=T.sum(z);W+te>D.scrollTop+D.offsetHeight&&D.scrollBy(0,P)}k()}w.value++}const B=!ut();let C=!1;function N(s){var f;(f=n.onScroll)===null||f===void 0||f.call(n,s),(!B||!C)&&k()}function E(s){var f;if((f=n.onWheel)===null||f===void 0||f.call(n,s),B){const b=u.value;if(b!=null){if(s.deltaX===0&&(b.scrollTop===0&&s.deltaY<=0||b.scrollTop+b.offsetHeight>=b.scrollHeight&&s.deltaY>=0))return;s.preventDefault(),b.scrollTop+=s.deltaY/$e(),b.scrollLeft+=s.deltaX/$e(),k(),C=!0,Me(()=>{C=!1})}}}function Y(s){if(t||L(s.target)||s.contentRect.height===v.value)return;v.value=s.contentRect.height;const{onResize:f}=n;f!==void 0&&f(s)}function k(){const{value:s}=u;s!=null&&(M.value=s.scrollTop,g=s.scrollLeft)}function L(s){let f=s;for(;f!==null;){if(f.style.display==="none")return!0;f=f.parentElement}return!1}return{listHeight:v,listStyle:{overflow:"auto"},keyToIndex:r,itemsStyle:_(()=>{const{itemResizable:s}=n,f=G(d.value.sum());return w.value,[n.itemsStyle,{boxSizing:"content-box",height:s?"":f,minHeight:s?f:"",paddingTop:G(n.paddingTop),paddingBottom:G(n.paddingBottom)}]}),visibleItemsStyle:_(()=>(w.value,{transform:`translateY(${G(d.value.sum(a.value))})`})),viewportItems:c,listElRef:u,itemsElRef:I(null),scrollTo:p,handleListResize:Y,handleListScroll:N,handleListWheel:E,handleItemResize:x}},render(){const{itemResizable:n,keyField:e,keyToIndex:t,visibleItemsTag:o}=this;return F(xe,{onResize:this.handleListResize},{default:()=>{var r,u;return F("div",_e(this.$attrs,{class:["v-vl",this.showScrollbar&&"v-vl--show-scrollbar"],onScroll:this.handleListScroll,onWheel:this.handleListWheel,ref:"listElRef"}),[this.items.length!==0?F("div",{ref:"itemsElRef",class:"v-vl-items",style:this.itemsStyle},[F(o,Object.assign({class:"v-vl-visible-items",style:this.visibleItemsStyle},this.visibleItemsProps),{default:()=>this.viewportItems.map(v=>{const m=v[e],d=t.get(m),w=this.$slots.default({item:v,index:d})[0];return n?F(xe,{key:m,onResize:g=>this.handleItemResize(m,g)},{default:()=>w}):(w.key=m,w)})})]):(u=(r=this.$slots).empty)===null||u===void 0?void 0:u.call(r)])}})}}),O="v-hidden",dt=V("[v-hidden]",{display:"none!important"}),St=X({name:"Overflow",props:{getCounter:Function,getTail:Function,updateCounter:Function,onUpdateCount:Function,onUpdateOverflow:Function},setup(n,{slots:e}){const t=I(null),o=I(null);function r(v){const{value:m}=t,{getCounter:d,getTail:w}=n;let g;if(d!==void 0?g=d():g=o.value,!m||!g)return;g.hasAttribute(O)&&g.removeAttribute(O);const{children:M}=m;if(v.showAllItemsBeforeCalculate)for(const x of M)x.hasAttribute(O)&&x.removeAttribute(O);const a=m.offsetWidth,c=[],p=e.tail?w==null?void 0:w():null;let h=p?p.offsetWidth:0,l=!1;const i=m.children.length-(e.tail?1:0);for(let x=0;x<i-1;++x){if(x<0)continue;const B=M[x];if(l){B.hasAttribute(O)||B.setAttribute(O,"");continue}else B.hasAttribute(O)&&B.removeAttribute(O);const C=B.offsetWidth;if(h+=C,c[x]=C,h>a){const{updateCounter:N}=n;for(let E=x;E>=0;--E){const Y=i-1-E;N!==void 0?N(Y):g.textContent=`${Y}`;const k=g.offsetWidth;if(h-=c[E],h+k<=a||E===0){l=!0,x=E-1,p&&(x===-1?(p.style.maxWidth=`${a-k}px`,p.style.boxSizing="border-box"):p.style.maxWidth="");const{onUpdateCount:L}=n;L&&L(Y);break}}}}const{onUpdateOverflow:y}=n;l?y!==void 0&&y(!0):(y!==void 0&&y(!1),g.setAttribute(O,""))}const u=de();return dt.mount({id:"vueuc/overflow",head:!0,anchorMetaName:fe,ssr:u}),K(()=>r({showAllItemsBeforeCalculate:!1})),{selfRef:t,counterRef:o,sync:r}},render(){const{$slots:n}=this;return Ee(()=>this.sync({showAllItemsBeforeCalculate:!1})),F("div",{class:"v-overflow",ref:"selfRef"},[Ae(n,"default"),n.counter?n.counter():F("span",{style:{display:"inline-block"},ref:"counterRef"}),n.tail?n.tail():null])}});function Ie(n){return n instanceof HTMLElement}function Oe(n){for(let e=0;e<n.childNodes.length;e++){const t=n.childNodes[e];if(Ie(t)&&(ke(t)||Oe(t)))return!0}return!1}function Ce(n){for(let e=n.childNodes.length-1;e>=0;e--){const t=n.childNodes[e];if(Ie(t)&&(ke(t)||Ce(t)))return!0}return!1}function ke(n){if(!ft(n))return!1;try{n.focus({preventScroll:!0})}catch{}return document.activeElement===n}function ft(n){if(n.tabIndex>0||n.tabIndex===0&&n.getAttribute("tabIndex")!==null)return!0;if(n.getAttribute("disabled"))return!1;switch(n.nodeName){case"A":return!!n.href&&n.rel!=="ignore";case"INPUT":return n.type!=="hidden"&&n.type!=="file";case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}}let j=[];const zt=X({name:"FocusTrap",props:{disabled:Boolean,active:Boolean,autoFocus:{type:Boolean,default:!0},onEsc:Function,initialFocusTo:String,finalFocusTo:String,returnFocusOnDeactivated:{type:Boolean,default:!0}},setup(n){const e=Le(),t=I(null),o=I(null);let r=!1,u=!1;const v=typeof document>"u"?null:document.activeElement;function m(){return j[j.length-1]===e}function d(l){var i;l.code==="Escape"&&m()&&((i=n.onEsc)===null||i===void 0||i.call(n,l))}K(()=>{U(()=>n.active,l=>{l?(M(),re("keydown",document,d)):(q("keydown",document,d),r&&a())},{immediate:!0})}),R(()=>{q("keydown",document,d),r&&a()});function w(l){if(!u&&m()){const i=g();if(i===null||i.contains(We(l)))return;c("first")}}function g(){const l=t.value;if(l===null)return null;let i=l;for(;i=i.nextSibling,!(i===null||i instanceof Element&&i.tagName==="DIV"););return i}function M(){var l;if(!n.disabled){if(j.push(e),n.autoFocus){const{initialFocusTo:i}=n;i===void 0?c("first"):(l=ve(i))===null||l===void 0||l.focus({preventScroll:!0})}r=!0,document.addEventListener("focus",w,!0)}}function a(){var l;if(n.disabled||(document.removeEventListener("focus",w,!0),j=j.filter(y=>y!==e),m()))return;const{finalFocusTo:i}=n;i!==void 0?(l=ve(i))===null||l===void 0||l.focus({preventScroll:!0}):n.returnFocusOnDeactivated&&v instanceof HTMLElement&&(u=!0,v.focus({preventScroll:!0}),u=!1)}function c(l){if(m()&&n.active){const i=t.value,y=o.value;if(i!==null&&y!==null){const x=g();if(x==null||x===y){u=!0,i.focus({preventScroll:!0}),u=!1;return}u=!0;const B=l==="first"?Oe(x):Ce(x);u=!1,B||(u=!0,i.focus({preventScroll:!0}),u=!1)}}}function p(l){if(u)return;const i=g();i!==null&&(l.relatedTarget!==null&&i.contains(l.relatedTarget)?c("last"):c("first"))}function h(l){u||(l.relatedTarget!==null&&l.relatedTarget===t.value?c("last"):c("first"))}return{focusableStartRef:t,focusableEndRef:o,focusableStyle:"position: absolute; height: 0; width: 0;",handleStartFocus:p,handleEndFocus:h}},render(){const{default:n}=this.$slots;if(n===void 0)return null;if(this.disabled)return n();const{active:e,focusableStyle:t}=this;return F(Se,null,[F("div",{"aria-hidden":"true",tabindex:e?"0":"-1",ref:"focusableStartRef",style:t,onFocus:this.handleStartFocus}),n(),F("div",{"aria-hidden":"true",style:t,ref:"focusableEndRef",tabindex:e?"0":"-1",onFocus:this.handleEndFocus})])}});export{yt as B,zt as F,Re as L,xe as V,Mt as a,$t as b,xt as c,St as d,ye as r};
